{% extends 'blog/base.html' %}
{% block content %}
{% if user.is_authenticated %}
    <div class="mb-4">
        <h1 class="mb-3">포스트 목록</h1>
        <p class="text-muted">안녕하세요, {{ user.username }}님! 총 {{ posts|length }}개의 포스트가 있습니다.</p>
    </div>
    
    <div class="post-grid">
        {% for post in posts %}
        <article class="post-card">
            {% if post.image %}
            <img src="{{ post.image.url }}" class="post-media" alt="{{ post.title }}">
            {% endif %}
            <div class="post-body">
                <div class="post-date">{{ post.published_date }}</div>
                <h2 class="post-title">{{ post.title }}</h2>
                {% if post.text %}
                <p class="post-text">{{ post.text|truncatechars:140 }}</p>
                {% endif %}
            </div>
        </article>
        {% empty %}
        <div class="alert alert-info">
            아직 등록된 포스트가 없습니다.
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="alert alert-warning">
        로그인이 필요합니다. <a href="{% url 'login' %}">로그인</a>하거나 <a href="{% url 'register' %}">회원가입</a>해주세요.
    </div>
{% endif %}
{% endblock %}